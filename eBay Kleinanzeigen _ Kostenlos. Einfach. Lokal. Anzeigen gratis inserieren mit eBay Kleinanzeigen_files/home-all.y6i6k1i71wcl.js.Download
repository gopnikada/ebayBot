Belen.Home.HomeView=function(){var k,i=function(){var n,t,a,i,o,l,r,d,c,f,s=4;function h(e,i){return-1==$.inArray(e,a)&&($.ajax({url:k.gallery.ajaxUrl,data:{locId:k.gallery.locationId,page:e},success:function(e){n=e.numPages,"function"==typeof i&&i(e)}}),a.push(e)),!1}function u(e,i){var n=$('<li class="itemtile-condensed" data-page="'+i+'"><div class="itemtile-header"><a href="'+e.linkUrl+'"><img alt="" src="'+e.imageUrl+'"></a></div><div class="itemtile-body"><h3 class="itemtile-title"><a href="'+e.linkUrl+'">'+e.title+'</a></h3><div class="itemtile-location">'+e.location+"</div></div></li>");return null!=e.priceString&&0<e.priceString.length&&n.find(".itemtile-body").append('<div class="itemtile-ribbon"><span class="itemtile-price">'+e.priceString+"</span></div>"),n}function p(){var e=d.children().length/s*o+(a.length-1)*l;d.width(e)}function m(){var e=t+1;n<=e&&(e=0),h(e,function(i){$.each(i.entries,function(){var e=u(this,i.currentPage);d.append(e)}),p()})}function g(e){var i=t-1;i<0&&(i=n-1),h(i,function(i){$.each(i.entries,function(){var e=u(this,i.currentPage);d.prepend(e)}),p(),null!=e&&"function"==typeof e&&e()})}function v(){f.click(function(e){!function(){var e=d.children().last().data("page");if(t==e){var i=d.children().slice(0,s);d.append(i),d.offset({left:d.offset().left+(o+l)})}d.animate({left:"-="+(o+l)},{start:function(){w()},complete:function(){v();var e=(t=t<n-1?t+1:0)+1;n<=e&&(e=0),-1==$.inArray(e,a)&&m()}})}()}),c.click(function(e){!function(){var e=d.children().first().data("page");if(t==e){var i=d.children().slice(d.children().length-s);d.prepend(i),d.offset({left:d.offset().left-(o+l)})}d.animate({left:"+="+(o+l)},{start:function(){w()},complete:function(){v();var e=(t=0==t?n-1:t-1)-1;e<0&&(e=n-1),-1==$.inArray(e,a)&&g(function(){d.offset({left:d.offset().left-(o+l)})})}})}()})}function w(){c.add(f).off("click")}return{init:function(){var e;n=k.gallery.initNumPages,t=k.gallery.initCurrentPage,a=[t],r=$("#home-gallery"),r.find(".carousel-viewport"),d=r.find(".carousel-list"),c=$("#home-gllry-prev"),f=$("#home-gllry-next"),o=d.width(),i=d.children("li:first-child").width(),l=(o-i*s)/(s-1),n<=1&&f.add(c).addClass("is-hidden"),1<n&&(m(),v()),2<n&&(g(),d.offset({left:d.offset().left-(o+l)})),$("#home-hpgallery-info-lnk").magnificPopup({items:{src:"#home-hpgallery-info"},type:"inline",preloader:!1}),!0===k.adblockSurvey&&(e="hpsrvy","true"!=Belen.Common.Userprefs.readCookieValue(e)&&(Belen.Common.CommonView.buildSurveyModal("https://www.surveymonkey.de/r/FLT98GT"),Belen.Common.Userprefs.writeCookieValue(e,"true")))}}}(),n=function(){var t=$("#home-ul-ctgrs");t.find("li.p-home-li-subctgrs-more a").click(function(e){e.preventDefault();var i=$(this).parents("ul").eq(0),n=$(this).parent("li:eq(0)");t.find(".is-opened").makeHidden(),t.find("li.p-home-li-subctgrs-more").revokeHidden(),i.children(".is-hidden").addClass("is-opened").revokeHidden(),n.makeHidden()})},t=function(){$("body").on("click.itemtile",".itemtile-body, .itemtile-header, .itemtile-ribbon",function(e){if(0==$(e.target).closest("a",this).length){var i=$(this).parent().find(".itemtile-title a"),n=i.data("gaevent");void 0!==n&&""!==n&&Belen.TrackingDispatcher.track(n),window.location.href=i.attr("href")}})},a=function(){var i=1;$("#home-ads").find(".itemtile").each(function(e){e%20==0&&($(this).addClass("j-feed-page").data("page",i),i++)}),$(".j-feed-item").each(function(e){e%20==0&&($(this).addClass("j-feed-page").data("page",i),i++)}),$(window).on("scroll",function(){$(".j-feed-page").not(".is-hidden").each(function(){if(i=$(this),n=$(window).scrollTop(),t=i.offset().top,Math.abs(t-n)<50){var e=$(this).data("page");$(this).removeClass("j-feed-page"),Belen.Tracking.trackGoogleAnalyticsEvent(window.pageType+",ReachedPage"+e)}var i,n,t});var e=$(".j-feed-back2top");window.scrollY>2*window.innerHeight?e.revokeHidden():e.makeHidden(),window.innerHeight+window.scrollY>=document.body.scrollHeight&&0===$(".j-feed-page.is-hidden").length&&$(window).off("scroll")})},o=function(){var e=1,i=100,n=$(".j-feed-item").length;$(".j-feed-item:lt(100)").revokeHidden(),$(".j-feed-show-more").click(function(){i+=100,$(".j-feed-item.is-hidden:lt(100)").revokeHidden(),n<=i&&$(".j-feed-show-more").makeHidden(),Belen.Tracking.trackGoogleAnalyticsEvent(window.pageType+",ShowMoreAdsClickSuccess,"+e++)}),$(".j-feed-back2top").click(function(){$(window).scrollTop(0),$(this).makeHidden()})};return{init:function(e){k=e,n(),i.init(),t(),a(),o(),Belen.Tracking.trackCriteoItemPage({event:"viewHome",user_segment:"1"})}}}();